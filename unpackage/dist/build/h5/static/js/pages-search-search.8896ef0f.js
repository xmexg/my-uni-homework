(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"093a":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var i={uniSearchBar:a("6ffb").default,uniIcons:a("584b").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("uni-search-bar",{attrs:{placeholder:"搜索内容"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirm.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.onCancel.apply(void 0,arguments)},clear:function(t){arguments[0]=t=e.$handleEvent(t),e.onClear.apply(void 0,arguments)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("v-uni-view",{staticClass:"list-box"},e._l(e.list,(function(t){return a("v-uni-view",{key:t.cat_id,staticClass:"list-item",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onItemClick(t)}}},[a("v-uni-image",{staticClass:"img",attrs:{src:t.goods_small_logo,mode:""}}),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticClass:"title"},[e._v(e._s(t.goods_name))]),a("v-uni-view",{staticClass:"price"},[e._v("￥"+e._s(t.goods_price))])],1)],1)})),1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"loading"},[e._v("加载中...")]),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isFinished,expression:"isFinished"}],staticClass:"finished"},[e._v("亲，我也是有底线的~")]),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isShowHistory,expression:"isShowHistory"}],staticClass:"history-box"},[a("v-uni-view",{staticClass:"history-titlr-box"},[a("v-uni-view",{staticClass:"title"},[e._v("搜索历史")]),a("uni-icons",{attrs:{size:"24",type:"trash-filled"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.anClearHistory.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"history-desc-box"},e._l(e.historyList,(function(t,i){return a("v-uni-view",{key:i,staticClass:"history-item",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onHistoryItemClik(t)}}},[e._v(e._s(t))])})),1)],1)],1)},o=[]},"0af8":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-searchbar[data-v-487feab8]{display:flex;flex-direction:row;position:relative;padding:10px}.uni-searchbar__box[data-v-487feab8]{display:flex;box-sizing:border-box;overflow:hidden;position:relative;flex:1;justify-content:center;flex-direction:row;align-items:center;height:36px;padding:5px 8px 5px 0}.uni-searchbar__box-icon-search[data-v-487feab8]{display:flex;flex-direction:row;padding:0 8px;justify-content:center;align-items:center;color:#b3b3b3}.uni-searchbar__box-search-input[data-v-487feab8]{flex:1;font-size:14px;color:#333}.uni-searchbar__box-icon-clear[data-v-487feab8]{align-items:center;line-height:24px;padding-left:8px;cursor:pointer}.uni-searchbar__text-placeholder[data-v-487feab8]{font-size:14px;color:#b3b3b3;margin-left:5px}.uni-searchbar__cancel[data-v-487feab8]{padding-left:10px;line-height:36px;font-size:14px;color:#333;cursor:pointer}',""]),e.exports=t},2830:function(e,t,a){"use strict";a.r(t);var i=a("093a"),n=a("e1f8");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("f687");var s=a("f0c5"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"2e6246c6",null,!1,i["a"],void 0);t["default"]=r.exports},2909:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)||(0,n.default)(e)||(0,o.default)(e)||(0,s.default)()};var i=r(a("6005")),n=r(a("db90")),o=r(a("06c5")),s=r(a("3427"));function r(e){return e&&e.__esModule?e:{default:e}}},"303b":function(e,t,a){"use strict";var i=a("ed81"),n=a.n(i);n.a},3427:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("d9e2"),a("d401")},4418:function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3");var n=a("37dc"),o=i(a("a858")),s=(0,n.initVueI18n)(o.default),r=s.t,c={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:function(){return{show:!1,showSync:!1,searchVal:""}},computed:{cancelTextI18n:function(){return this.cancelText||r("uni-search-bar.cancel")},placeholderText:function(){return this.placeholder||r("uni-search-bar.placeholder")}},watch:{value:{immediate:!0,handler:function(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler:function(e){var t=this;if(e){if(this.readonly)return;this.show=!0,this.$nextTick((function(){t.showSync=!0}))}}},searchVal:function(e,t){this.$emit("input",e)}},methods:{searchClick:function(){var e=this;this.readonly||this.show||(this.show=!0,this.$nextTick((function(){e.showSync=!0})))},clear:function(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel:function(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,uni.hideKeyboard())},confirm:function(){uni.hideKeyboard(),this.$emit("confirm",{value:this.searchVal})},blur:function(){uni.hideKeyboard(),this.$emit("blur",{value:this.searchVal})},emitFocus:function(e){this.$emit("focus",e.detail)}}};t.default=c},"4cd6":function(e){e.exports=JSON.parse('{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"請輸入搜索內容"}')},5668:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-searchbar[data-v-2e6246c6]{background-color:red;position:fixed!important;width:%?750?%;box-sizing:border-box;z-index:3}.uni-searchbar__cancel[data-v-2e6246c6]{color:#fff!important}.list-box[data-v-2e6246c6]{padding-top:56px}.list-item[data-v-2e6246c6]{display:flex;background-color:#fff;padding:2px;border-bottom:1px #eee solid}.img[data-v-2e6246c6]{width:%?238?%;height:%?238?%}.right[data-v-2e6246c6]{width:%?512?%;padding:4px 6px;display:flex;flex-direction:column;justify-content:space-between}.title[data-v-2e6246c6]{font-size:14px;font-weight:500}.price[data-v-2e6246c6]{color:red;font-size:16px}.loading[data-v-2e6246c6]{pandding:12px;text-align:center;color:#ccc}.finished[data-v-2e6246c6]{pandding:12px;text-align:center;color:#ccc}.history-box[data-v-2e6246c6]{padding:12px}.history-titlr-box[data-v-2e6246c6]{display:flex;justify-content:space-between;font-size:16px;align-items:center;border-bottom:1px #ccc solid;padding-bottom:12px}.history-desc-box[data-v-2e6246c6]{display:flex;flex-wrap:wrap;padding-top:12px}.history-item[data-v-2e6246c6]{border:1px #ccc solid;padding:1px 18px;margin-right:12px;margin-bottom:6px;border-radius:5px;color:#666}',""]),e.exports=t},6005:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,i.default)(e)};var i=function(e){return e&&e.__esModule?e:{default:e}}(a("6b75"))},"6ffb":function(e,t,a){"use strict";a.r(t);var i=a("709a"),n=a("a29f");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("303b");var s=a("f0c5"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"487feab8",null,!1,i["a"],void 0);t["default"]=r.exports},"709a":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var i={uniIcons:a("584b").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"uni-searchbar"},[a("v-uni-view",{staticClass:"uni-searchbar__box",style:{borderRadius:e.radius+"px",backgroundColor:e.bgColor},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.searchClick.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-searchbar__box-icon-search"},[e._t("searchIcon",[a("uni-icons",{attrs:{color:"#c0c4cc",size:"18",type:"search"}})])],2),e.show||e.searchVal?a("v-uni-input",{staticClass:"uni-searchbar__box-search-input",attrs:{focus:e.showSync,disabled:e.readonly,placeholder:e.placeholderText,maxlength:e.maxlength,"confirm-type":"search",type:"text"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.blur.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.emitFocus.apply(void 0,arguments)}},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}}):a("v-uni-text",{staticClass:"uni-searchbar__text-placeholder"},[e._v(e._s(e.placeholder))]),e.show&&("always"===e.clearButton||"auto"===e.clearButton&&""!==e.searchVal)&&!e.readonly?a("v-uni-view",{staticClass:"uni-searchbar__box-icon-clear",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clear.apply(void 0,arguments)}}},[e._t("clearIcon",[a("uni-icons",{attrs:{color:"#c0c4cc",size:"20",type:"clear"}})])],2):e._e()],1),"always"===e.cancelButton||e.show&&"auto"===e.cancelButton?a("v-uni-text",{staticClass:"uni-searchbar__cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)}}},[e._v(e._s(e.cancelTextI18n))]):e._e()],1)},o=[]},"8ce6":function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("2909"));a("caad"),a("2532"),a("c740"),a("a434"),a("3c65"),a("99af");var o={data:function(){return{query:"",pagenum:1,pagesize:20,isLoading:!1,isFinished:!1,list:[],historyList:[],searchValue:"",isShowHistory:!0}},methods:{onItemClick:function(e){uni.navigateTo({url:"/pages/goods-detail/goods-detail?goodsId="+e.goods_id})},anClearHistory:function(){this.historyList=[]},onHistoryItemClik:function(e){console.log(e),this.searchValue=e,this.onConfirm({value:e})},onCancel:function(){console.log("cancel"),this.list=[],this.isFinished=!1,this.isShowHistory=!0},onClear:function(){console.log("clear")},onConfirm:function(e){if(console.log(e),this.isShowHistory=!1,this.query=e.value,this.pagenum=1,this.loadData(),this.historyList.includes(e.value)){var t=this.historyList.findIndex((function(t){return t===e.value}));this.historyList.splice(t,1)}this.historyList.unshift(e.value)},loadData:function(){var e=this;this.isLoading=!0,uni.request({url:"https://api-hmugo-web.itheima.net/api/public/v1/goods/search",data:{query:this.query,pagenum:this.pagenum,pagesize:this.pagesize},success:function(t){console.log(t),1===e.pagenum?e.list=t.data.message.goods:e.list=[].concat((0,n.default)(e.list),(0,n.default)(t.data.message.goods));var a=t.data.message.total,i=e.list.length;e.isFinished=a===i,e.isLoading=!1}})}},onReachBottom:function(){console.log("页面即将触底"),this.pagenum=this.pagenum+1,this.isFinished||this.loadData()}};t.default=o},"9d35":function(e){e.exports=JSON.parse('{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"}')},a29f:function(e,t,a){"use strict";a.r(t);var i=a("4418"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},a858:function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("9d35")),o=i(a("bbb8")),s=i(a("4cd6")),r={en:n.default,"zh-Hans":o.default,"zh-Hant":s.default};t.default=r},bbb8:function(e){e.exports=JSON.parse('{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"请输入搜索内容"}')},db90:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630")},e1f8:function(e,t,a){"use strict";a.r(t);var i=a("8ce6"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},ed81:function(e,t,a){var i=a("0af8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("ff3ffb20",i,!0,{sourceMap:!1,shadowMode:!1})},f687:function(e,t,a){"use strict";var i=a("fe5e"),n=a.n(i);n.a},fe5e:function(e,t,a){var i=a("5668");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("87138eda",i,!0,{sourceMap:!1,shadowMode:!1})}}]);